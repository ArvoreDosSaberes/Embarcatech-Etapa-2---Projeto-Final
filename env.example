# ===========================================
# Dashboard Rack Inteligente - EmbarcaTech
# Arquivo de exemplo de configuração
# Copie este arquivo para .env e ajuste os valores
# ===========================================

# ===========================================
# WiFi Configuration (Firmware)
# ===========================================
# Configurações de WiFi utilizadas pelo firmware ESP32
WIFI_SSID="SuaRedeWiFi"
WIFI_PASSWORD="SuaSenhaWiFi"


# ===========================================
# MQTT Broker Configuration
# ===========================================
# Servidor MQTT (OBRIGATÓRIO)
MQTT_SERVER=mqtt.seu-servidor.com
# Porta do broker MQTT (default: 1883)
MQTT_PORT=1883
# Credenciais de autenticação MQTT
MQTT_USERNAME=usuario
MQTT_PASSWORD=senha_segura
# Intervalo de keepalive em segundos (default: 60)
MQTT_KEEPALIVE=60
# Tópico base para comunicação com os racks
# Formato: {MQTT_BASE_TOPIC}/{rack_id}/...
MQTT_BASE_TOPIC=racks/


# ===========================================
# MQTT Client Configuration (Firmware)
# ===========================================
# Identificador do cliente MQTT
MQTT_CLIENT_ID="Rack Inteligente"
# Número/ID do rack físico
MQTT_RACK_NUMBER="PICOW001"


# ===========================================
# Generative AI / LLM Configuration
# ===========================================
# Chave de API para o servidor de IA generativa (OBRIGATÓRIO para controle AI)
GENAI_API_KEY=sua-chave-api-aqui
# URL do servidor de IA (sem protocolo, será adicionado automaticamente)
GENAI_URL=generativa.rapport.tec.br/api/v1
# Modelo LLM a ser utilizado para análise e controle
# Exemplo: GENAI_MODEL=analisador-de-segurana-e-ambiente-do-rack-inteligente
GENAI_MODEL=granite4:3b
PROMPT_PATH=/home/carlosdelfino/workspace/EmbarcaTech/Projeto_Final/dashboard/prompts


# ===========================================
# Log Level
# ===========================================
# Nível de log: 0=CRITICAL, 1=ERROR, 2=WARNING, 3=INFO, 4=DEBUG
LOG_LEVEL=3


# ===========================================
# AI Control - Schmitt Trigger Thresholds
# ===========================================
# Limiares com histerese para evitar acionamentos desnecessários

# --- Temperatura (em °C) ---
# Ventilação LIGA quando temp >= TEMP_HIGH_THRESHOLD
TEMP_HIGH_THRESHOLD=35
# Ventilação DESLIGA quando temp <= TEMP_LOW_THRESHOLD
TEMP_LOW_THRESHOLD=28

# --- Alerta Crítico de Temperatura ---
# Ativa alarme de superaquecimento quando temp >= TEMP_CRITICAL_THRESHOLD
TEMP_CRITICAL_THRESHOLD=45
# Desativa alarme quando temp <= TEMP_CRITICAL_RESET
TEMP_CRITICAL_RESET=40

# --- Umidade (em %) ---
# Ventilação LIGA quando umidade >= HUMIDITY_HIGH_THRESHOLD
HUMIDITY_HIGH_THRESHOLD=80
# Ventilação DESLIGA quando umidade <= HUMIDITY_LOW_THRESHOLD
HUMIDITY_LOW_THRESHOLD=60


# ===========================================
# AI Analysis Configuration
# ===========================================
# Intervalo entre análises AI (em segundos)
# Menor valor = análise mais frequente, maior uso de API
AI_ANALYSIS_INTERVAL=10

# Janela de histórico para cálculo de tendência (em minutos)
TREND_HISTORY_WINDOW=60

# Taxa mínima de variação para considerar tendência (°C/min ou %/min)
# Valores abaixo deste limiar são considerados estáveis
TREND_MIN_RATE=0.1


# ===========================================
# Command ACK Configuration
# ===========================================
# Tempo limite para confirmação de comandos enviados ao firmware (em segundos)
# Se o firmware não confirmar dentro deste tempo, o comando é considerado expirado
COMMAND_ACK_TIMEOUT=5.0


# ===========================================
# Forecast Service - Time Series Prediction
# ===========================================
# Configurações para previsão de séries temporais
# Usa arquitetura híbrida: Granite TTM (principal) + SARIMA (fallback)

# Intervalo de agregação de dados em segundos
# 3600 = 1 hora (dados são agregados em médias horárias)
FORECAST_SAMPLE_INTERVAL=3600

# Horizonte de previsão em passos
# 24 = 24 horas à frente (com intervalo de 1h)
FORECAST_HORIZON=24

# Tamanho do contexto/histórico em passos
# 168 = 7 dias * 24 horas (uma semana de dados)
FORECAST_CONTEXT_LENGTH=168


# ===========================================
# Forecast Service - SARIMA Fallback
# ===========================================
# Configurações do modelo SARIMA usado como fallback
# quando o Granite TTM não está disponível ou MAE elevado

# Limiar de MAE para ativar fallback SARIMA
# Se o erro do modelo Granite exceder este valor, o SARIMA assume
FORECAST_MAE_THRESHOLD=5.0

# Período sazonal diário (24 horas)
# Captura padrões que se repetem a cada dia
FORECAST_SEASONAL_PERIOD_DAILY=24

# Período sazonal anual (365 dias * 24 horas = 8760)
# Captura variações climáticas anuais (verão/inverno)
FORECAST_SEASONAL_PERIOD_ANNUAL=8760

# Habilitar sazonalidade anual para previsão climática
# true = considera variações climáticas do ano
# false = usa apenas sazonalidade diária
FORECAST_ENABLE_ANNUAL_SEASONALITY=true
